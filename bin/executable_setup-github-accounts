#!/bin/bash
# Setup script for multiple GitHub accounts

echo "ğŸš€ Setting up multiple GitHub accounts..."
echo "========================================"

# Check if GitHub CLI is installed
if ! command -v gh &> /dev/null; then
    echo "âŒ GitHub CLI is not installed. Please install it first:"
    echo "   brew install gh"
    exit 1
fi

echo ""
echo "ğŸ“‹ Current SSH keys:"
ssh-add -l

echo ""
echo "ğŸ”‘ Setting up SSH keys in keychain..."
ssh-add --apple-use-keychain ~/.ssh/id_ed25519
ssh-add --apple-use-keychain ~/.ssh/id_ed25519_atreion

echo ""
echo "ğŸ” GitHub CLI Authentication Setup"
echo "=================================="
echo ""
echo "You need to authenticate both accounts with GitHub CLI."
echo "This will open your browser for authentication."
echo ""

# Authenticate work account
echo "1ï¸âƒ£ Authenticating WORK account (david.drottson@pinmeto.com)..."
echo "   - Use your work email: david.drottson@pinmeto.com"
echo "   - Use SSH key: ~/.ssh/id_ed25519"
gh auth login --hostname github.com --git-protocol ssh --web

# Authenticate personal account
echo ""
echo "2ï¸âƒ£ Authenticating PERSONAL account (atreion)..."
echo "   - Use your personal email: 5829476+atreion@users.noreply.github.com"
echo "   - Use SSH key: ~/.ssh/id_ed25519_atreion"
gh auth login --hostname github.com --git-protocol ssh --web

echo ""
echo "âœ… Setup complete!"
echo ""
echo "ğŸ“ Next steps:"
echo "1. Test your setup with: git-status"
echo "2. Switch accounts with: git-work or git-personal"
echo "3. Clone repositories with: clone-work or clone-personal"
echo ""
echo "ğŸ“ Directory structure:"
echo "   ~/ws/                    â†’ Work repositories (auto-configured)"
echo "   ~/personal/              â†’ Personal repositories (auto-configured)"
echo "   ~/projects/personal/     â†’ Personal repositories (auto-configured)"
